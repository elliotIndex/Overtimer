<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Overtimer</title>
  <link rel="stylesheet" href="assets/stylesheets/main.css">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300' rel='stylesheet' type='text/css'>

  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>

  <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/mosaicon-02/512/timer-512.png">
</head>

<body>

  <!-- Header -->

  <header class="primary-header container group">

    <h1 class="logo">
      <a id="main-logo" href="index.html">Overtimer</a>
    </h1>

    <nav class="nav primary-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
      </ul>
    </nav>

  </header>

  <!-- Main Body -->
  <section class="primary-body">
    <section class="body-upper">
      <h2 class="body-header">
        Home Feed
      </h2>

      <btn class="Pause primary-button" onclick="toggleRunning()">
        Pause
      </btn>

      <btn class="start-stop primary-button" onclick="initializeTimeLeft()">
        Start/Stop
      </btn>
    </section>


    <section class="time-display">
      <div class="hours">00</div>
      <char class="semicolon">:</char>
      <div class="minutes">00</div>
      <char class="semicolon">:</char>
      <div class="seconds">00</div>
    </section>
    <ul class="tweet-list"></ul>


    <script>


    var displayTime = function(hours, minutes, seconds) {
      $('.hours').text(hours);
      $('.minutes').text(minutes);
      $('.seconds').text(seconds);
    }

    var initializeTimeLeft = function () {
      hrsLeft = inputHours;
      minsLeft = inputMins;
      secsLeft = inputSecs;
      start();
    }

    var start = function () {
      setEndTime(hrsLeft, minsLeft, secsLeft);
      toggleRunning();
    }

    var setEndTime = function (hours, minutes, seconds) {
      var endTimeMS = +now + 1000*(hours + 60*(minutes + (60*seconds)));
      endTime = new Date(endTimeMS);
    }

    var pause = function () {
      now = new Date;
      hrsLeft = endTime.getHours() - now.getHours();
      minsLeft = endTime.getMinutes() - now.getMinutes();
      secsLeft = endTime.getSeconds() - now.getSeconds();

      toggleRunning();
    }

    var toggleRunning = function () {
      $(".Pause").toggleClass("pressed")
      running = !running;
      running ? $(".Pause").text("Pause") : $(".Pause").text("Resume");
      refresher = running ? setInterval(refreshTime, 1000) : clearInterval(refresher);
      $(".")
    }

    var refreshTime = function () {
      now = Date.now();
      var timeLeftMS = endTime - now;
      if (timeLeftMS >= 0) {
        var timeLeft = new Date(timeLeftMS);
        displayTime(timeLeft.getHours()-16, timeLeft.getMinutes(), timeLeft.getSeconds());
      } else {
        overTime = true;
        toggleRunning();
      }
    }

    //////////////////////////////////////
    //            Main Script           //
    //////////////////////////////////////
    var inputHours = 1;
    var inputMins = 1;
    var inputSecs = 10;

    var hrsLeft = 0;
    var minsLeft = 0;
    var secsLeft = 0;

    var startTime;
    var endTime;
    var now = new Date;
    var running = false;
    var refresher;
    var overTime = false;

    $(document).ready();
    if (running) { refresher = setInterval(refreshFeed, 200); };

    </script>

  </section>

  <!-- Footer -->

  <footer class="primary-footer container group">

    <small>&copy; Elliot Plant 2015</small>

    <nav class="nav">
      <ul>
        <li><a href="index.html">Home</a></li>
      </ul>
    </nav>

  </footer>

</body>
</html>
